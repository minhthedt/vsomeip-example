<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1202px" preserveAspectRatio="none" style="width:901px;height:1202px;" version="1.1" viewBox="0 0 901 1202" width="901px" zoomAndPan="magnify"><defs><filter height="300%" id="fegdgbb0cie8c" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#ADD8E6" height="1187.8359" style="stroke: #A80036; stroke-width: 1.0;" width="134" x="7" y="4"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="128" x="10" y="16.0669">PC1(192.168.1.5)</text><rect fill="#DDDDDD" height="1187.8359" style="stroke: #A80036; stroke-width: 1.0;" width="249" x="283" y="4"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="147" x="334" y="16.0669">Switch(192.168.1.1)</text><rect fill="#ADD8E6" height="1187.8359" style="stroke: #A80036; stroke-width: 1.0;" width="134" x="661.5" y="4"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="128" x="664.5" y="16.0669">PC2(192.168.1.7)</text><rect fill="#FFFFFF" filter="url(#fegdgbb0cie8c)" height="161.0625" style="stroke: #000000; stroke-width: 2.0;" width="507.5" x="30.5" y="297.625"/><rect fill="#FFFFFF" filter="url(#fegdgbb0cie8c)" height="161.0625" style="stroke: #000000; stroke-width: 2.0;" width="412" x="363" y="501.8203"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="73.5" x2="73.5" y1="58.4297" y2="1153.5391"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="333" x2="333" y1="58.4297" y2="1153.5391"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="459" x2="459" y1="58.4297" y2="1153.5391"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="728" x2="728" y1="58.4297" y2="1153.5391"/><rect fill="#FEFECE" filter="url(#fegdgbb0cie8c)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="63" x="40.5" y="23.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="49" x="47.5" y="43.1279">sender</text><rect fill="#FEFECE" filter="url(#fegdgbb0cie8c)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="63" x="40.5" y="1152.5391"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="49" x="47.5" y="1172.5342">sender</text><rect fill="#FEFECE" filter="url(#fegdgbb0cie8c)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="89" x="287" y="23.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="75" x="294" y="43.1279">224.0.0.22</text><rect fill="#FEFECE" filter="url(#fegdgbb0cie8c)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="89" x="287" y="1152.5391"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="75" x="294" y="1172.5342">224.0.0.22</text><rect fill="#FEFECE" filter="url(#fegdgbb0cie8c)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="134" x="390" y="23.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="120" x="397" y="43.1279">224.224.224.245</text><rect fill="#FEFECE" filter="url(#fegdgbb0cie8c)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="134" x="390" y="1152.5391"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="120" x="397" y="1172.5342">224.224.224.245</text><rect fill="#FEFECE" filter="url(#fegdgbb0cie8c)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="69" x="692" y="23.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="55" x="699" y="43.1279">receiver</text><rect fill="#FEFECE" filter="url(#fegdgbb0cie8c)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="69" x="692" y="1152.5391"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="55" x="699" y="1172.5342">receiver</text><path d="M8,73.4297 L8,98.4297 L137,98.4297 L137,83.4297 L127,73.4297 L8,73.4297 " fill="#FBFB77" filter="url(#fegdgbb0cie8c)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M127,73.4297 L127,83.4297 L137,83.4297 L127,73.4297 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="108" x="14" y="90.4966">Client ID: 0x1313</text><path d="M647,112.5625 L647,182.5625 L806,182.5625 L806,122.5625 L796,112.5625 L647,112.5625 " fill="#FBFB77" filter="url(#fegdgbb0cie8c)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M796,112.5625 L796,122.5625 L806,122.5625 L796,112.5625 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="129" x="653" y="129.6294">service_id = 0x1234</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="138" x="653" y="144.7622">instance_id = 0x5678</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="134" x="653" y="159.895">method_id = 0x0421</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="70" x="653" y="175.0278">unreliable :</text><text fill="#0000FF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="45" x="727" y="175.0278">30509</text><path d="M79,197.0938 L79,252.0938 L207,252.0938 L207,207.0938 L197,197.0938 L79,197.0938 " fill="#FBFB77" filter="url(#fegdgbb0cie8c)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M197,197.0938 L197,207.0938 L207,207.0938 L197,197.0938 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="103" x="85" y="214.1606">IGMPv3 protocol</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="103" x="85" y="229.2935">src: 192.168.1.5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96" x="85" y="244.4263">dst: 224.0.0.22</text><polygon fill="#A80036" points="321.5,278.625,331.5,282.625,321.5,286.625,325.5,282.625" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="74" x2="327.5" y1="282.625" y2="282.625"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="81" y="277.5591">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="143" x="94" y="277.5591">Join to multicast group</text><path d="M30.5,297.625 L100.5,297.625 L100.5,304.625 L90.5,314.625 L30.5,314.625 L30.5,297.625 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="161.0625" style="stroke: #000000; stroke-width: 2.0;" width="507.5" x="30.5" y="297.625"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="25" x="45.5" y="310.6919">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="338" x="115.5" y="309.8354">[resend (max = 4 times) until receive offer message]</text><path d="M79,319.7578 L79,419.7578 L513,419.7578 L513,329.7578 L503,319.7578 L79,319.7578 " fill="#FBFB77" filter="url(#fegdgbb0cie8c)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M503,319.7578 L503,329.7578 L513,329.7578 L503,319.7578 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="84" x="85" y="336.8247">UDP protocol</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="147" x="85" y="351.9575">src: 192.168.1.5:30490</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="180" x="85" y="367.0903">dst: 224.224.224.245:30490</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="216" x="85" y="382.2231">Message Type: 0x02 (Notification)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="145" x="85" y="397.356">Message ID: 0xffff8100</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="413" x="85" y="412.4888">Service ID 0x1234, Instance ID 0x5678, Version 255.4294967295</text><polygon fill="#A80036" points="447,446.6875,457,450.6875,447,454.6875,451,450.6875" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="74" x2="453" y1="450.6875" y2="450.6875"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="81" y="445.6216">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="201" x="94" y="445.6216">(SOME/IP-SD) send Find service</text><polygon fill="#A80036" points="344.5,482.8203,334.5,486.8203,344.5,490.8203,340.5,486.8203" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="338.5" x2="727.5" y1="486.8203" y2="486.8203"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="350.5" y="481.7544">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="194" x="363.5" y="481.7544">IGMPv3 Join to multicast group</text><path d="M363,501.8203 L440,501.8203 L440,508.8203 L430,518.8203 L363,518.8203 L363,501.8203 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="161.0625" style="stroke: #000000; stroke-width: 2.0;" width="412" x="363" y="501.8203"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="378" y="514.8872">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="155" x="455" y="514.0308">[every 2s(configurable)]</text><path d="M373,523.9531 L373,623.9531 L719,623.9531 L719,533.9531 L709,523.9531 L373,523.9531 " fill="#FBFB77" filter="url(#fegdgbb0cie8c)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M709,523.9531 L709,533.9531 L719,533.9531 L709,523.9531 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="84" x="379" y="541.02">UDP protocol</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="147" x="379" y="556.1528">src: 192.168.1.7:30490</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="180" x="379" y="571.2856">dst: 224.224.224.245:30490</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="216" x="379" y="586.4185">Message Type: 0x02 (Notification)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="145" x="379" y="601.5513">Message ID: 0xffff8100</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="325" x="379" y="616.6841">Service ID 0x1234, Instance ID 0x5678, Version 0.0</text><polygon fill="#A80036" points="470,650.8828,460,654.8828,470,658.8828,466,654.8828" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="464" x2="727.5" y1="654.8828" y2="654.8828"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="476" y="649.8169">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="206" x="489" y="649.8169">(SOME/IP-SD) send Offer service</text><polygon fill="#A80036" points="85,687.0156,75,691.0156,85,695.0156,81,691.0156" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="79" x2="458" y1="691.0156" y2="691.0156"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="91" y="685.9497">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="280" x="104" y="685.9497">ON_OFFER_SERVICE(0000): [1234.5678:0.0]</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="74" x2="116" y1="720.1484" y2="720.1484"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="116" x2="116" y1="720.1484" y2="733.1484"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="75" x2="116" y1="733.1484" y2="733.1484"/><polygon fill="#A80036" points="85,729.1484,75,733.1484,85,737.1484,81,733.1484" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="81" y="715.0825">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="203" x="94" y="715.0825">Service [1234.5678] is available</text><path d="M79,746.1484 L79,861.1484 L413,861.1484 L413,756.1484 L403,746.1484 L79,746.1484 " fill="#FBFB77" filter="url(#fegdgbb0cie8c)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M403,746.1484 L403,756.1484 L413,756.1484 L403,746.1484 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="84" x="85" y="763.2153">UDP protocol</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="107" x="85" y="778.3481">src: 192.168.1.5:</text><text fill="#0000FF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="45" x="192" y="778.3481">38366</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="241" y="778.3481"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="108" x="85" y="793.481">dst: 192.168.1.7:</text><text fill="#0000FF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="45" x="193" y="793.481">30509</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="202" x="85" y="808.6138">Message type = (0x00) request</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="161" x="85" y="823.7466">Message ID: 0x12340421</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="108" x="85" y="838.8794">Client ID: 0x1313</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="313" x="85" y="854.0122">Session ID: 0x0001 -&gt; increase after each calling</text><polygon fill="#0000FF" points="716.5,888.2109,726.5,892.2109,716.5,896.2109,720.5,892.2109" style="stroke: #0000FF; stroke-width: 1.0;"/><line style="stroke: #0000FF; stroke-width: 1.0;" x1="74" x2="722.5" y1="892.2109" y2="892.2109"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="81" y="887.145">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="331" x="94" y="887.145">(SOME/IP)send(request{1234.5678.0421, payload})</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="728.5" x2="770.5" y1="921.3438" y2="921.3438"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="770.5" x2="770.5" y1="921.3438" y2="934.3438"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="729.5" x2="770.5" y1="934.3438" y2="934.3438"/><polygon fill="#A80036" points="739.5,930.3438,729.5,934.3438,739.5,938.3438,735.5,934.3438" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="735.5" y="916.2778">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="141" x="748.5" y="916.2778">on_message(request)</text><path d="M486,947.3438 L486,1062.3438 L719,1062.3438 L719,957.3438 L709,947.3438 L486,947.3438 " fill="#FBFB77" filter="url(#fegdgbb0cie8c)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M709,947.3438 L709,957.3438 L719,957.3438 L709,947.3438 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="84" x="492" y="964.4106">UDP protocol</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="147" x="492" y="979.5435">src: 192.168.1.7:30509</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="148" x="492" y="994.6763">dst: 192.168.1.5:38366</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="212" x="492" y="1009.8091">Message type = (0x80) response</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="161" x="492" y="1024.9419">Message ID: 0x12340421</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="108" x="492" y="1040.0747">Client ID: 0x1313</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="122" x="492" y="1055.2075">Session ID: 0x0001</text><polygon fill="#0000FF" points="85,1089.4063,75,1093.4063,85,1097.4063,81,1093.4063" style="stroke: #0000FF; stroke-width: 1.0;"/><line style="stroke: #0000FF; stroke-width: 1.0;" x1="79" x2="727.5" y1="1093.4063" y2="1093.4063"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="91" y="1088.3403">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="286" x="104" y="1088.3403">(SOME/IP)send(response{request, payload})</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="74" x2="116" y1="1122.5391" y2="1122.5391"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="116" x2="116" y1="1122.5391" y2="1135.5391"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="75" x2="116" y1="1135.5391" y2="1135.5391"/><polygon fill="#A80036" points="85,1131.5391,75,1135.5391,85,1139.5391,81,1135.5391" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="81" y="1117.4731">10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="151" x="103" y="1117.4731">on_message(response)</text><!--MD5=[31896e0f092d3ecc9aaa680b5ba0fa85]
@startuml
autonumber
box "PC1(192.168.1.5)" #LightBlue
participant "sender" as client1
end box
box "Switch(192.168.1.1)"
participant "224.0.0.22" as router_igmp
participant "224.224.224.245" as rounter_mutilcast
end box

box "PC2(192.168.1.7)" #LightBlue
participant "receiver" as client2

end box
note over client1: Client ID: 0x1313
note over client2
service_id = 0x1234
instance_id = 0x5678
method_id = 0x0421
unreliable : **<color blue>30509</color>**
end note
note right of client1: IGMPv3 protocol\nsrc: 192.168.1.5 \ndst: 224.0.0.22
client1->router_igmp: Join to multicast group

opt resend (max = 4 times) until receive offer message
note right of client1
UDP protocol
src: 192.168.1.5:30490
dst: 224.224.224.245:30490
Message Type: 0x02 (Notification)
Message ID: 0xffff8100
Service ID 0x1234, Instance ID 0x5678, Version 255.4294967295
end note
client1->rounter_mutilcast: (SOME/IP-SD) send Find service
end
client2->router_igmp: IGMPv3 Join to multicast group
loop every 2s(configurable)
note left of client2
UDP protocol
src: 192.168.1.7:30490
dst: 224.224.224.245:30490
Message Type: 0x02 (Notification)
Message ID: 0xffff8100
Service ID 0x1234, Instance ID 0x5678, Version 0.0
end note
client2->rounter_mutilcast: (SOME/IP-SD) send Offer service
end

rounter_mutilcast->client1: ON_OFFER_SERVICE(0000): [1234.5678:0.0]
client1->client1: Service [1234.5678] is available

note right of client1
UDP protocol
src: 192.168.1.5:**<color blue>38366</color>** 
dst: 192.168.1.7:**<color blue>30509</color>**
Message type = (0x00) request
Message ID: 0x12340421
Client ID: 0x1313
Session ID: 0x0001 -> increase after each calling
end note
client1-[#blue]>client2: (SOME/IP)send(request{1234.5678.0421, payload})
client2->client2: on_message(request)

note left of client2
UDP protocol
src: 192.168.1.7:30509
dst: 192.168.1.5:38366
Message type = (0x80) response
Message ID: 0x12340421
Client ID: 0x1313
Session ID: 0x0001
end note
client2-[#blue]>client1: (SOME/IP)send(response{request, payload})
client1->client1: on_message(response)
@enduml

PlantUML version 1.2020.02(Sun Mar 01 10:22:07 UTC 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 17.0.15+6
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg>