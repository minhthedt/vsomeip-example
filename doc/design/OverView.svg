<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="672px" preserveAspectRatio="none" style="width:896px;height:672px;" version="1.1" viewBox="0 0 896 672" width="896px" zoomAndPan="magnify"><defs><filter height="300%" id="f1g50ltosln3ou" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#ADD8E6" height="657.25" style="stroke: #A80036; stroke-width: 1.0;" width="134" x="56" y="4"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="128" x="59" y="16.0669">PC1(192.168.1.5)</text><rect fill="#DDDDDD" height="657.25" style="stroke: #A80036; stroke-width: 1.0;" width="249" x="333" y="4"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="147" x="384" y="16.0669">Switch(192.168.1.1)</text><rect fill="#ADD8E6" height="657.25" style="stroke: #A80036; stroke-width: 1.0;" width="134" x="739.5" y="4"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="128" x="742.5" y="16.0669">PC2(192.168.1.7)</text><rect fill="#FFFFFF" filter="url(#f1g50ltosln3ou)" height="100.5313" style="stroke: #000000; stroke-width: 2.0;" width="576" x="12" y="228.2266"/><rect fill="#FFFFFF" filter="url(#f1g50ltosln3ou)" height="46.2656" style="stroke: #000000; stroke-width: 2.0;" width="423" x="430" y="371.8906"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="122.5" x2="122.5" y1="58.4297" y2="622.9531"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="383" x2="383" y1="58.4297" y2="622.9531"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="509" x2="509" y1="58.4297" y2="622.9531"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="806" x2="806" y1="58.4297" y2="622.9531"/><rect fill="#FEFECE" filter="url(#f1g50ltosln3ou)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="63" x="89.5" y="23.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="49" x="96.5" y="43.1279">sender</text><rect fill="#FEFECE" filter="url(#f1g50ltosln3ou)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="63" x="89.5" y="621.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="49" x="96.5" y="641.9482">sender</text><rect fill="#FEFECE" filter="url(#f1g50ltosln3ou)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="89" x="337" y="23.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="75" x="344" y="43.1279">224.0.0.22</text><rect fill="#FEFECE" filter="url(#f1g50ltosln3ou)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="89" x="337" y="621.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="75" x="344" y="641.9482">224.0.0.22</text><rect fill="#FEFECE" filter="url(#f1g50ltosln3ou)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="134" x="440" y="23.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="120" x="447" y="43.1279">224.224.224.245</text><rect fill="#FEFECE" filter="url(#f1g50ltosln3ou)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="134" x="440" y="621.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="120" x="447" y="641.9482">224.224.224.245</text><rect fill="#FEFECE" filter="url(#f1g50ltosln3ou)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="69" x="770" y="23.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="55" x="777" y="43.1279">receiver</text><rect fill="#FEFECE" filter="url(#f1g50ltosln3ou)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="69" x="770" y="621.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="55" x="777" y="641.9482">receiver</text><path d="M725,73.4297 L725,128.4297 L884,128.4297 L884,83.4297 L874,73.4297 L725,73.4297 " fill="#FBFB77" filter="url(#f1g50ltosln3ou)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M874,73.4297 L874,83.4297 L884,83.4297 L874,73.4297 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="129" x="731" y="90.4966">service_id = 0x1234</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="138" x="731" y="105.6294">instance_id = 0x5678</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="134" x="731" y="120.7622">method_id = 0x0421</text><path d="M57,142.8281 L57,182.8281 L185,182.8281 L185,152.8281 L175,142.8281 L57,142.8281 " fill="#FBFB77" filter="url(#f1g50ltosln3ou)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M175,142.8281 L175,152.8281 L185,152.8281 L175,142.8281 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="103" x="63" y="159.895">src: 192.168.1.5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="92" x="63" y="175.0278">dst:224.0.0.22</text><polygon fill="#A80036" points="371.5,209.2266,381.5,213.2266,371.5,217.2266,375.5,213.2266" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="123" x2="377.5" y1="213.2266" y2="213.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="130" y="208.1606">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="194" x="143" y="208.1606">IGMPv3 Join to multicast group</text><path d="M12,228.2266 L82,228.2266 L82,235.2266 L72,245.2266 L12,245.2266 L12,228.2266 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="100.5313" style="stroke: #000000; stroke-width: 2.0;" width="576" x="12" y="228.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="25" x="27" y="241.2935">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="338" x="97" y="240.437">[resend (max = 4 times) until receive offer message]</text><path d="M22,250.3594 L22,290.3594 L219,290.3594 L219,260.3594 L209,250.3594 L22,250.3594 " fill="#FBFB77" filter="url(#f1g50ltosln3ou)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M209,250.3594 L209,260.3594 L219,260.3594 L209,250.3594 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="147" x="28" y="267.4263">src: 192.168.1.5:30490</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="176" x="28" y="282.5591">dst:224.224.224.245:30490</text><polygon fill="#A80036" points="497,316.7578,507,320.7578,497,324.7578,501,320.7578" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="123" x2="503" y1="320.7578" y2="320.7578"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="130" y="315.6919">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="229" x="143" y="315.6919">UDP(SOME/IP-SD) send Find service</text><polygon fill="#A80036" points="394.5,352.8906,384.5,356.8906,394.5,360.8906,390.5,356.8906" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="388.5" x2="805.5" y1="356.8906" y2="356.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="400.5" y="351.8247">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="194" x="413.5" y="351.8247">IGMPv3 Join to multicast group</text><path d="M430,371.8906 L507,371.8906 L507,378.8906 L497,388.8906 L430,388.8906 L430,371.8906 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="46.2656" style="stroke: #000000; stroke-width: 2.0;" width="423" x="430" y="371.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="445" y="384.9575">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="155" x="522" y="384.1011">[every 2s(configurable)]</text><polygon fill="#A80036" points="520,406.1563,510,410.1563,520,414.1563,516,410.1563" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="514" x2="805.5" y1="410.1563" y2="410.1563"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="526" y="405.0903">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="234" x="539" y="405.0903">UDP(SOME/IP-SD) send Offer service</text><polygon fill="#A80036" points="134,442.2891,124,446.2891,134,450.2891,130,446.2891" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="128" x2="508" y1="446.2891" y2="446.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="140" y="441.2231">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="280" x="153" y="441.2231">ON_OFFER_SERVICE(0000): [1234.5678:0.0]</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="123" x2="165" y1="475.4219" y2="475.4219"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="165" x2="165" y1="475.4219" y2="488.4219"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="124" x2="165" y1="488.4219" y2="488.4219"/><polygon fill="#A80036" points="134,484.4219,124,488.4219,134,492.4219,130,488.4219" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="130" y="470.356">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="203" x="143" y="470.356">Service [1234.5678] is available</text><polygon fill="#A80036" points="497,513.5547,507,517.5547,497,521.5547,501,517.5547" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="123" x2="503" y1="517.5547" y2="517.5547"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="130" y="512.4888">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="268" x="143" y="512.4888">send(request{1234.5678.0421, payload})</text><polygon fill="#A80036" points="794.5,542.6875,804.5,546.6875,794.5,550.6875,798.5,546.6875" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="509" x2="800.5" y1="546.6875" y2="546.6875"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="516" y="541.6216">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="141" x="529" y="541.6216">on_message(request)</text><polygon fill="#A80036" points="520,571.8203,510,575.8203,520,579.8203,516,575.8203" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="514" x2="805.5" y1="575.8203" y2="575.8203"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="526" y="570.7544">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="223" x="539" y="570.7544">send(response{request, payload})</text><polygon fill="#A80036" points="134,600.9531,124,604.9531,134,608.9531,130,604.9531" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="128" x2="508" y1="604.9531" y2="604.9531"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="140" y="599.8872">10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="151" x="162" y="599.8872">on_message(response)</text><!--MD5=[992103f0bb618188935c03c540b8e90a]
@startuml
autonumber
box "PC1(192.168.1.5)" #LightBlue
participant "sender" as client1
end box
box "Switch(192.168.1.1)"
participant "224.0.0.22" as router_igmp
participant "224.224.224.245" as rounter_mutilcast
end box

box "PC2(192.168.1.7)" #LightBlue
participant "receiver" as client2

end box
note over client2: service_id = 0x1234\ninstance_id = 0x5678\nmethod_id = 0x0421
note over client1: src: 192.168.1.5 \ndst:224.0.0.22
client1->router_igmp: IGMPv3 Join to multicast group

opt resend (max = 4 times) until receive offer message
note over client1: src: 192.168.1.5:30490 \ndst:224.224.224.245:30490
client1->rounter_mutilcast: UDP(SOME/IP-SD) send Find service
end
client2->router_igmp: IGMPv3 Join to multicast group
loop every 2s(configurable)
client2->rounter_mutilcast: UDP(SOME/IP-SD) send Offer service
end

rounter_mutilcast->client1: ON_OFFER_SERVICE(0000): [1234.5678:0.0]
client1->client1: Service [1234.5678] is available
client1->rounter_mutilcast: send(request{1234.5678.0421, payload})
rounter_mutilcast->client2: on_message(request)
client2->rounter_mutilcast: send(response{request, payload})
rounter_mutilcast->client1: on_message(response)
@enduml

PlantUML version 1.2020.02(Sun Mar 01 10:22:07 UTC 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 17.0.15+6
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg>