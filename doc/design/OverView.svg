<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1378px" preserveAspectRatio="none" style="width:954px;height:1378px;" version="1.1" viewBox="0 0 954 1378" width="954px" zoomAndPan="magnify"><defs><filter height="300%" id="f1sr4mp8ho7pc2" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#ADD8E6" height="1363.6328" style="stroke: #A80036; stroke-width: 1.0;" width="134" x="7" y="4"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="128" x="10" y="16.0669">PC1(192.168.1.5)</text><rect fill="#DDDDDD" height="1363.6328" style="stroke: #A80036; stroke-width: 1.0;" width="249" x="327" y="4"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="147" x="378" y="16.0669">Switch(192.168.1.1)</text><rect fill="#ADD8E6" height="1363.6328" style="stroke: #A80036; stroke-width: 1.0;" width="134" x="705.5" y="4"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="128" x="708.5" y="16.0669">PC2(192.168.1.7)</text><rect fill="#FFFFFF" filter="url(#f1sr4mp8ho7pc2)" height="248.4609" style="stroke: #000000; stroke-width: 2.0;" width="788.5" x="30.5" y="297.625"/><rect fill="#FFFFFF" filter="url(#f1sr4mp8ho7pc2)" height="205.3281" style="stroke: #000000; stroke-width: 2.0;" width="788.5" x="30.5" y="589.2188"/><rect fill="#FFFFFF" filter="url(#f1sr4mp8ho7pc2)" height="59.2656" style="stroke: #000000; stroke-width: 2.0;" width="783" x="30.5" y="1253.0703"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="73.5" x2="73.5" y1="58.4297" y2="1329.3359"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="377" x2="377" y1="58.4297" y2="1329.3359"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="503" x2="503" y1="58.4297" y2="1329.3359"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="772" x2="772" y1="58.4297" y2="1329.3359"/><rect fill="#FEFECE" filter="url(#f1sr4mp8ho7pc2)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="63" x="40.5" y="23.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="49" x="47.5" y="43.1279">sender</text><rect fill="#FEFECE" filter="url(#f1sr4mp8ho7pc2)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="63" x="40.5" y="1328.3359"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="49" x="47.5" y="1348.3311">sender</text><rect fill="#FEFECE" filter="url(#f1sr4mp8ho7pc2)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="89" x="331" y="23.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="75" x="338" y="43.1279">224.0.0.22</text><rect fill="#FEFECE" filter="url(#f1sr4mp8ho7pc2)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="89" x="331" y="1328.3359"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="75" x="338" y="1348.3311">224.0.0.22</text><rect fill="#FEFECE" filter="url(#f1sr4mp8ho7pc2)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="134" x="434" y="23.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="120" x="441" y="43.1279">224.224.224.245</text><rect fill="#FEFECE" filter="url(#f1sr4mp8ho7pc2)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="134" x="434" y="1328.3359"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="120" x="441" y="1348.3311">224.224.224.245</text><rect fill="#FEFECE" filter="url(#f1sr4mp8ho7pc2)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="69" x="736" y="23.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="55" x="743" y="43.1279">receiver</text><rect fill="#FEFECE" filter="url(#f1sr4mp8ho7pc2)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="69" x="736" y="1328.3359"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="55" x="743" y="1348.3311">receiver</text><path d="M8,73.4297 L8,98.4297 L137,98.4297 L137,83.4297 L127,73.4297 L8,73.4297 " fill="#FBFB77" filter="url(#f1sr4mp8ho7pc2)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M127,73.4297 L127,83.4297 L137,83.4297 L127,73.4297 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="108" x="14" y="90.4966">Client ID: 0x1313</text><path d="M691,112.5625 L691,182.5625 L850,182.5625 L850,122.5625 L840,112.5625 L691,112.5625 " fill="#FBFB77" filter="url(#f1sr4mp8ho7pc2)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M840,112.5625 L840,122.5625 L850,122.5625 L840,112.5625 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="129" x="697" y="129.6294">service_id = 0x1234</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="138" x="697" y="144.7622">instance_id = 0x5678</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="134" x="697" y="159.895">method_id = 0x0421</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="70" x="697" y="175.0278">unreliable :</text><text fill="#0000FF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="45" x="771" y="175.0278">30509</text><path d="M79,197.0938 L79,252.0938 L207,252.0938 L207,207.0938 L197,197.0938 L79,197.0938 " fill="#FBFB77" filter="url(#f1sr4mp8ho7pc2)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M197,197.0938 L197,207.0938 L207,207.0938 L197,197.0938 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="103" x="85" y="214.1606">IGMPv3 protocol</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="103" x="85" y="229.2935">src: 192.168.1.5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96" x="85" y="244.4263">dst: 224.0.0.22</text><polygon fill="#A80036" points="365.5,278.625,375.5,282.625,365.5,286.625,369.5,282.625" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="74" x2="371.5" y1="282.625" y2="282.625"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="81" y="277.5591">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="143" x="94" y="277.5591">Join to multicast group</text><path d="M30.5,297.625 L100.5,297.625 L100.5,304.625 L90.5,314.625 L30.5,314.625 L30.5,297.625 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="248.4609" style="stroke: #000000; stroke-width: 2.0;" width="788.5" x="30.5" y="297.625"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="25" x="45.5" y="310.6919">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="611" x="115.5" y="309.8354">[after init, client send "Find service" 4 times (repetitions_max + 1) until receive offer message]</text><path d="M79,319.7578 L79,419.7578 L513,419.7578 L513,329.7578 L503,319.7578 L79,319.7578 " fill="#FBFB77" filter="url(#f1sr4mp8ho7pc2)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M503,319.7578 L503,329.7578 L513,329.7578 L503,319.7578 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="84" x="85" y="336.8247">UDP protocol</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="147" x="85" y="351.9575">src: 192.168.1.5:30490</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="180" x="85" y="367.0903">dst: 224.224.224.245:30490</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="216" x="85" y="382.2231">Message Type: 0x02 (Notification)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="145" x="85" y="397.356">Message ID: 0xffff8100</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="413" x="85" y="412.4888">Service ID 0x1234, Instance ID 0x5678, Version 255.4294967295</text><polygon fill="#A80036" points="491,446.6875,501,450.6875,491,454.6875,495,450.6875" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="74" x2="497" y1="450.6875" y2="450.6875"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="81" y="445.6216">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="201" x="94" y="445.6216">(SOME/IP-SD) send Find service</text><polygon fill="#A80036" points="760.5,475.8203,770.5,479.8203,760.5,483.8203,764.5,479.8203" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="503" x2="766.5" y1="479.8203" y2="479.8203"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="510" y="474.7544">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="140" x="523" y="474.7544">ON_FIND_SERVICE(...)</text><polygon fill="#A80036" points="514,504.9531,504,508.9531,514,512.9531,510,508.9531" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="508" x2="771.5" y1="508.9531" y2="508.9531"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="520" y="503.8872">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="206" x="533" y="503.8872">(SOME/IP-SD) send Offer service</text><polygon fill="#A80036" points="85,534.0859,75,538.0859,85,542.0859,81,538.0859" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="79" x2="502" y1="538.0859" y2="538.0859"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="91" y="533.02">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="280" x="104" y="533.02">ON_OFFER_SERVICE(0000): [1234.5678:0.0]</text><polygon fill="#A80036" points="388.5,570.2188,378.5,574.2188,388.5,578.2188,384.5,574.2188" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="382.5" x2="771.5" y1="574.2188" y2="574.2188"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="394.5" y="569.1528">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="194" x="407.5" y="569.1528">IGMPv3 Join to multicast group</text><path d="M30.5,589.2188 L107.5,589.2188 L107.5,596.2188 L97.5,606.2188 L30.5,606.2188 L30.5,589.2188 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="205.3281" style="stroke: #000000; stroke-width: 2.0;" width="788.5" x="30.5" y="589.2188"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="45.5" y="602.2856">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="223" x="122.5" y="601.4292">[every 2000ms(cyclic_offer_delay)]</text><path d="M417,611.3516 L417,726.3516 L763,726.3516 L763,621.3516 L753,611.3516 L417,611.3516 " fill="#FBFB77" filter="url(#f1sr4mp8ho7pc2)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M753,611.3516 L753,621.3516 L763,621.3516 L753,611.3516 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="84" x="423" y="628.4185">UDP protocol</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="147" x="423" y="643.5513">src: 192.168.1.7:30490</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="180" x="423" y="658.6841">dst: 224.224.224.245:30490</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="216" x="423" y="673.8169">Message Type: 0x02 (Notification)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="145" x="423" y="688.9497">Message ID: 0xffff8100</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="325" x="423" y="704.0825">Service ID 0x1234, Instance ID 0x5678, Version 0.0</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="278" x="423" y="719.2153">Endpoint Option (192.168.1.7:30509 (UDP))</text><polygon fill="#A80036" points="514,753.4141,504,757.4141,514,761.4141,510,757.4141" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="508" x2="771.5" y1="757.4141" y2="757.4141"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="520" y="752.3481">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="206" x="533" y="752.3481">(SOME/IP-SD) send Offer service</text><polygon fill="#A80036" points="85,782.5469,75,786.5469,85,790.5469,81,786.5469" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="79" x2="502" y1="786.5469" y2="786.5469"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="91" y="781.481">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="280" x="104" y="781.481">ON_OFFER_SERVICE(0000): [1234.5678:0.0]</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="74" x2="116" y1="822.6797" y2="822.6797"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="116" x2="116" y1="822.6797" y2="835.6797"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="75" x2="116" y1="835.6797" y2="835.6797"/><polygon fill="#A80036" points="85,831.6797,75,835.6797,85,839.6797,81,835.6797" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="81" y="817.6138">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="203" x="94" y="817.6138">Service [1234.5678] is available</text><path d="M79,848.6797 L79,963.6797 L413,963.6797 L413,858.6797 L403,848.6797 L79,848.6797 " fill="#FBFB77" filter="url(#f1sr4mp8ho7pc2)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M403,848.6797 L403,858.6797 L413,858.6797 L403,848.6797 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="84" x="85" y="865.7466">UDP protocol</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="107" x="85" y="880.8794">src: 192.168.1.5:</text><text fill="#0000FF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="45" x="192" y="880.8794">38366</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="241" y="880.8794"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="108" x="85" y="896.0122">dst: 192.168.1.7:</text><text fill="#0000FF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="45" x="193" y="896.0122">30509</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="202" x="85" y="911.145">Message type = (0x00) request</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="161" x="85" y="926.2778">Message ID: 0x12340421</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="108" x="85" y="941.4106">Client ID: 0x1313</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="313" x="85" y="956.5435">Session ID: 0x0001 -&gt; increase after each calling</text><polygon fill="#0000FF" points="760.5,990.7422,770.5,994.7422,760.5,998.7422,764.5,994.7422" style="stroke: #0000FF; stroke-width: 1.0;"/><line style="stroke: #0000FF; stroke-width: 1.0;" x1="74" x2="766.5" y1="994.7422" y2="994.7422"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="81" y="989.6763">10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="331" x="103" y="989.6763">(SOME/IP)send(request{1234.5678.0421, payload})</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="772.5" x2="814.5" y1="1023.875" y2="1023.875"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="814.5" x2="814.5" y1="1023.875" y2="1036.875"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="773.5" x2="814.5" y1="1036.875" y2="1036.875"/><polygon fill="#A80036" points="783.5,1032.875,773.5,1036.875,783.5,1040.875,779.5,1036.875" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="779.5" y="1018.8091">11</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="141" x="801.5" y="1018.8091">on_message(request)</text><path d="M530,1049.875 L530,1164.875 L763,1164.875 L763,1059.875 L753,1049.875 L530,1049.875 " fill="#FBFB77" filter="url(#f1sr4mp8ho7pc2)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M753,1049.875 L753,1059.875 L763,1059.875 L753,1049.875 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="84" x="536" y="1066.9419">UDP protocol</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="147" x="536" y="1082.0747">src: 192.168.1.7:30509</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="148" x="536" y="1097.2075">dst: 192.168.1.5:38366</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="212" x="536" y="1112.3403">Message type = (0x80) response</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="161" x="536" y="1127.4731">Message ID: 0x12340421</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="108" x="536" y="1142.606">Client ID: 0x1313</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="122" x="536" y="1157.7388">Session ID: 0x0001</text><polygon fill="#0000FF" points="85,1191.9375,75,1195.9375,85,1199.9375,81,1195.9375" style="stroke: #0000FF; stroke-width: 1.0;"/><line style="stroke: #0000FF; stroke-width: 1.0;" x1="79" x2="771.5" y1="1195.9375" y2="1195.9375"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="91" y="1190.8716">12</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="286" x="113" y="1190.8716">(SOME/IP)send(response{request, payload})</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="74" x2="116" y1="1225.0703" y2="1225.0703"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="116" x2="116" y1="1225.0703" y2="1238.0703"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="75" x2="116" y1="1238.0703" y2="1238.0703"/><polygon fill="#A80036" points="85,1234.0703,75,1238.0703,85,1242.0703,81,1238.0703" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="81" y="1220.0044">13</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="151" x="103" y="1220.0044">on_message(response)</text><path d="M30.5,1253.0703 L100.5,1253.0703 L100.5,1260.0703 L90.5,1270.0703 L30.5,1270.0703 L30.5,1253.0703 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="59.2656" style="stroke: #000000; stroke-width: 2.0;" width="783" x="30.5" y="1253.0703"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="25" x="45.5" y="1266.1372">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="693" x="115.5" y="1265.2808">[if client don't receive Offer message in 2000ms (cyclic_offer_delay) =&gt; client think server is NOT available]</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="74" x2="116" y1="1291.3359" y2="1291.3359"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="116" x2="116" y1="1291.3359" y2="1304.3359"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="75" x2="116" y1="1304.3359" y2="1304.3359"/><polygon fill="#A80036" points="85,1300.3359,75,1304.3359,85,1308.3359,81,1304.3359" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="81" y="1286.27">14</text><text fill="#FF0000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="234" x="103" y="1286.27">Service [1234.5678] is NOT available</text><!--MD5=[89da298be0173e518c3957d82933df5c]
@startuml
autonumber
box "PC1(192.168.1.5)" #LightBlue
participant "sender" as client1
end box
box "Switch(192.168.1.1)"
participant "224.0.0.22" as router_igmp
participant "224.224.224.245" as rounter_mutilcast
end box

box "PC2(192.168.1.7)" #LightBlue
participant "receiver" as client2

end box
note over client1: Client ID: 0x1313
note over client2
    service_id = 0x1234
    instance_id = 0x5678
    method_id = 0x0421
    unreliable : **<color blue>30509</color>**
end note
note right of client1: IGMPv3 protocol\nsrc: 192.168.1.5 \ndst: 224.0.0.22
client1->router_igmp: Join to multicast group

opt after init, client send "Find service" 4 times (repetitions_max + 1) until receive offer message
note right of client1
    UDP protocol
    src: 192.168.1.5:30490
    dst: 224.224.224.245:30490
    Message Type: 0x02 (Notification)
    Message ID: 0xffff8100
    Service ID 0x1234, Instance ID 0x5678, Version 255.4294967295
end note
client1->rounter_mutilcast: (SOME/IP-SD) send Find service
rounter_mutilcast->client2: ON_FIND_SERVICE(...)
client2->rounter_mutilcast: (SOME/IP-SD) send Offer service
rounter_mutilcast->client1: ON_OFFER_SERVICE(0000): [1234.5678:0.0]
end
client2->router_igmp: IGMPv3 Join to multicast group
loop every 2000ms(cyclic_offer_delay)
note left of client2
    UDP protocol
    src: 192.168.1.7:30490
    dst: 224.224.224.245:30490
    Message Type: 0x02 (Notification)
    Message ID: 0xffff8100
    Service ID 0x1234, Instance ID 0x5678, Version 0.0
    Endpoint Option (192.168.1.7:30509 (UDP))
end note
client2->rounter_mutilcast: (SOME/IP-SD) send Offer service
rounter_mutilcast->client1: ON_OFFER_SERVICE(0000): [1234.5678:0.0]
end


client1->client1: Service [1234.5678] is available

note right of client1
UDP protocol
src: 192.168.1.5:**<color blue>38366</color>** 
dst: 192.168.1.7:**<color blue>30509</color>**
Message type = (0x00) request
Message ID: 0x12340421
Client ID: 0x1313
Session ID: 0x0001 -> increase after each calling
end note
client1-[#blue]>client2: (SOME/IP)send(request{1234.5678.0421, payload})
client2->client2: on_message(request)

note left of client2
UDP protocol
src: 192.168.1.7:30509
dst: 192.168.1.5:38366
Message type = (0x80) response
Message ID: 0x12340421
Client ID: 0x1313
Session ID: 0x0001
end note
client2-[#blue]>client1: (SOME/IP)send(response{request, payload})
client1->client1: on_message(response)
opt if client don't receive Offer message in 2000ms (cyclic_offer_delay) => client think server is NOT available
client1->client1: <color red>Service [1234.5678] is NOT available </color>
end
@enduml

PlantUML version 1.2020.02(Sun Mar 01 10:22:07 UTC 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 17.0.15+6
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg>